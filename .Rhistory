summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
plot_data <- sim_data %>%
group_by(Hb) %>%
summarize(readm_prob = mean(Readm),
N=n()) %>%
filter(Hb > 50, Hb < 100)
ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
summary(model_discont)
result_df_binary_trend <- data.frame()
for (i in c(1:1000)) {
if (i %% 50 == 1) {print(i)}
hemoglobin_values <- rnorm(10000,97,20)
observed_hb <- round(hemoglobin_values)
unit <- rbinom(10000,1,0.7)*10
observed_hb <- ifelse(observed_hb < 70, observed_hb + unit, observed_hb)
#summary(observed_hb)
risk_score <- runif(10000, 0, 1)*0.7
risk_beta <- log(risk_score/(1-risk_score)) + (97 - hemoglobin_values)*0.01
risk_score <- (exp(risk_beta))/ (1+exp(risk_beta))
readm_values <- rbinom(10000, 1, risk_score)
sim_data <- data.frame(Hb = observed_hb, Readm = readm_values)
# plot_data <- sim_data %>%
#    group_by(Hb) %>%
#    summarize(readm_prob = mean(Readm),
#              N=n()) %>%
#    filter(Hb > 50, Hb < 100)
#ggplot(aes(x=Hb, y=readm_prob), data=plot_data) + geom_point() +ylim(0,1) + theme_bw()
model_discont <- rdrobust(y=sim_data$Readm, x=sim_data$Hb, c=70, bwselect="msetwo", all=TRUE)
#summary(model_discont)
conv_reject <- as.numeric(model_discont$ci[1,1] > 0 | model_discont$ci[1,2] < 0)
BC_reject <- as.numeric(model_discont$ci[2,1] > 0 | model_discont$ci[2,2] < 0)
robust_reject <- as.numeric(model_discont$ci[3,1] > 0 | model_discont$ci[3,2] < 0)
df_join <- data.frame(Conventional = conv_reject, Bias_Corrected = BC_reject, Robust = robust_reject)
result_df_binary_trend <- rbind(result_df_binary_trend , df_join)
}
mean(result_df_binary_trend$Conventional)
mean(result_df_binary_trend$Robust)
mean(result_df_binary_trend$Bias_Corrected)
mean(result_df_trend$Conventional)
mean(result_df_trend$Robust)
mean(result_df_trend$Bias_Corrected)
exp(-0.86)
0.2336^2
0.2336^2*exp(2*0.8605)
0.42 + c(-1,1)*1.96(sqrt(0.305))
0.42 + c(-1,1)*1.96*(sqrt(0.305))
0.2336^2*exp(2*-0.8605)
0.42 + c(-1,1)*1.96*(sqrt(0.00976))
exp(-0.66096-0.8605)
exp(-0.66096)
0.2184 / (1.2184)
0.5164 / (1.5164)
0.1793/0.3405
1925 - log(1.5375)/0.043
log(15/50 / (1-15/50))
log(30/50 / (1-30/50))
0.8473+0.4055
log(20/50 / (1-20/50))
0.8473 - 0.4055
log(40/50 / (1-40/50))
1.3863+0.8473-1.2528-0.4418
294.65-290.72
285.25-281.71
29465-285.25
294.65-285.25
exp(1.174-0.687)
0.1635+0.1194-2*0.0798
1.174-0.687
0.487+1.96*sqrt(0.1233)
0.487-1.96*sqrt(0.1233)
exp(-0.201, 1.175)
exp(c(-0.201, 1.175))
-(1/3)+1.96*sqrt(1/45)
-(1/3)-1.96*sqrt(1/45)
1/3 + c(-1,1)*1.96*sqrt(1/45)
(1/3-1/2) / sqrt(1/45)
5*log(1/2) - (3/2)*15 - 5 * log(1/3)+ (4/3)*15
2*-0.473
setwd("C:/Users/mhrisk/Desktop/R Package FederatedKM")
package.skeleton("FederatedKM",code_files="basic_functions.R")
package.skeleton("FederatedKM",code_files="basic_functions.R")
devtools::document()
devtools::check()
setwd("C:/Users/mhrisk/Desktop/R Package FederatedKM/FederatedKM")
devtools::document()
devtools::check()
devtools::check()
devtools::build()
